{% extends "./Common/layout_view.html" %}
{% block content %}

<div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="../../static/Banners/banner1.jpg" class="d-block w-100" alt="...">
        </div>
    </div>
</div>

<div class="container mt-5">
    <h2 class="text-center">Cinema Seat Selection</h2>
    <div class="text-center">
        <button id="checkout" class="btn btn-primary mt-2">Checkout</button>
    </div>
    <div class="row mt-3">
        <div class="col-md-6 offset-md-3">
            <div id="seats" class="d-flex flex-wrap justify-content-center"></div>
        </div>
    </div>
</div>

<script>
    const seatsContainer = document.getElementById("seats");
    const checkoutButton = document.getElementById("checkout");

    const totalSeats = 50; // Total number of seats
    let selectedSeats = [];

    // Create seat elements
    for (let seatNumber = 1; seatNumber <= totalSeats; seatNumber++) {
        const seat = document.createElement("div");
        seat.className = "seat";
        seat.dataset.seatNumber = seatNumber;

        seat.addEventListener("click", () => {
            if (seat.classList.contains("selected")) {
                seat.classList.remove("selected");
                const index = selectedSeats.indexOf(seatNumber);
                if (index > -1) {
                    selectedSeats.splice(index, 1);
                }
            } else {
                seat.classList.add("selected");
                selectedSeats.push(seatNumber);
            }
        });

        seatsContainer.appendChild(seat);
    }

    checkoutButton.addEventListener("click", () => {
        // Send selected seats data to the server
        fetch("{{ url_for('book_tickets') }}", {
            method: "POST",
            body: JSON.stringify(selectedSeats),
            headers: {
                "Content-Type": "application/json",
            },
        })
            .then(response => response.json())
            .then(data => {
                alert(`You selected ${data.length} seat(s).`);
            });
    });
</script>

<style>
    .seat {
        width: 30px;
        height: 30px;
        margin: 5px;
        background-color: #ccc;
        border: 1px solid #777;
        cursor: pointer;
    }
    .selected {
        background-color: #007BFF;
        color: #fff;
    }
</style>

{% endblock %}